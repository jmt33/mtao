## shell简介

### shell的概念

> 命令解释器，计算机沟通交流的媒介

### 常见的shell
> 常见的shell包括 bash-linux的标准shell   sh 早期shell  csh ksh tcsh unix


``shell
# /etc/shells: valid login shells
/bin/sh
/bin/dash
/bin/bash
/bin/rbash
/bin/zsh
/usr/bin/zsh
``

### shell脚本

#### 一个简单的hello world
``
#!/bin/bash

echo "Hello World"
``

脚本执行：

- 1、加可执行权限 ./hello.sh
- 2、bash hello.sh

平时用第一种方式较多

#### bash常见功能

##### 历史命令

>history

##### 别名

> .bashrc

``
alias ls="ls --color=never"
``

##### 输出重定向

``
# 把ls得出的结果输入到a文件
ls > a

#把ls得出的结果追加到a文件
ls>>a

#命令的错误结果输入到文件

ls  gdlslga  2>>aa

#把正确和错误都放入文件

ls  &>aa

#正确信息输入aa，错误信息输入bb

ls  >> aa  2>>bb

#错误和正确都输入到aa，可以追加
ls  >>  aa  2>&1
``

##### 多命令执行

> 命令1  ；  命令2 ； 命令3  命令123顺序执行。之间没有任何关

> 命令1  &&  命令2 命令1正确执行后，命令2才会执行

> 命令1  ||  命令2 命令1执行不正确，命令2才会执行

``
ls aa && echo "cunzai" || echo "bu cunzai! 
``

##### 管道符

``
# 命令1  |  命令2 命令1的执行结果，作为命令2的执行条件
# 查询监听的端口号，并查看80
netstat -tlun | grep 80

# 分屏显示ls内容
ls  -l  /etc/  |  more              
ls -l /etc/ | grep yum
``

### 变量

#### 本地变量
> 声明 变量名=变量值 注意：=号左右不能有空格 a=2
> 调用 echo $变量名字
> 

#### 环境变量
> 声明：export 变量名=变量值
export aa
set 查看所有变量
env 查看环境变量
export 查看环境变量

> 查看：set
> 设置类型：declare -i整型
> 删除：unset 变量名
``
1）变量以等号连接值，等号不能有空格
2）变量名由数字和字母和下划线组成，不能以数字开头
3）变量值中有空格，用引号括起来
4）双引号内，有特殊字符。如$
5）单引号中特殊字符无含义
6）在变量值中，可以使用\转义符
7）变量值可以直接调用系统命令。 `命令` $(命令)
echo `ls`
8）变量值可以累加 aa=123 aa="$aa"456 echo $aa
--->123456
9）环境变量一定设为大写

echo $PATH
``
让脚本不在用路径 [临时生效]
``
PATH="$PATH":/home/mtao/shell 
# 在系统默认路径后，追加/home/mtao/shell 目
# 录作为命令查找路径
``
##### 环境变量配置文件
> /etc/profile

> /etc/bashrc 所有用户生效

> ~/.bashrc

> ~/.bash_profile 只对指定用户生效

#### 位置参数变量

>$0 命令自己

>$1 第一个参数

>$2 第二个参数

>$3 第三个参数



#### 预定义变量
> $? 上一个命令的返回值。 0 上一个命令正确执行 非 0

> 上一个命令不正确

> $# 统计命令之后的参数个数

> $* 返回所有参数

##### read

>read -p “提示信息” -t 等待时间 变量名

``
#!/bin/bash
read -p "please input num1:" -t 30 test1
read -p "input num2:" -t 30 test2
sum=$(( $test1 + $test2))
echo “num1 + num2 = $sum”
``

#### 数值运算

>1）declare 方法
``
num1=123
num2=456
declare -i sum=$num1+$num2
``

>sum=$(( $num1 + $num2 )

>sum=$(expr $num1 + $num2) 注意+左右必须空格
)`

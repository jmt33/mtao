# PHP7在项目中的实践

## 成果上线经历的几个阶段

在PHP7未出欲出之际，对于它已经是“如雷贯耳”，什么提升性能数倍，什么让PHP变成强类型云云。共事的小伙伴们都是些前沿技术追崇者，一心想把它引入到自身的项目中，于是开始了漫长的尝试，分为以下几个阶段：

### 第一阶段：观察

PHP7诞生期，作为一个旁观者看网上同仁们的使用概况，并立下军令状，201x年xx月xx日务必完成对于PHP7的升级；

### 第二阶段：尝试

遇到瓶颈，Mongodb扩展是我们迈不过去的一个大坑。

### 第三阶段：灰心

好多瓶颈，由于PHP7打破向下兼容的定律，很多扩展也变得不支持，而他们迟迟没有升级解决方案，让小伙伴们瞬间沉入谷底，对于能否升级PHP7表示深深的怀疑。

![](ot84cmvmf.bkt.clouddn.com/20170928213446_R88r8K_无奈.jpeg)

### 第四阶段：开花

相对于第一阶段已经过去2～3年的时间，PHP7已经成熟普及在了大街小巷，升级它的欲望不由自主的再次升起。一个下午搜寻了各大英文资料，并进行了多次验证实验，结果是美好的，终于让PHP7在项目中不需要很多改动的情况下运行起来了。

### 第五阶段，筹备

经过第四阶段的实验，PHP7看情况要呼之欲出啦，但情况不仅其然，仍有很多障碍在前进的见路旁，比如：
- 双测试环境的解决，当时我们的测试机器只有一台，需要进行层层批复的申请，这一申请就是1个多月，不开心啊；
- 项目加密的需要提供完备解决方案，zend当时没有提供PHP7的解决方案，所以找了很多野路子进行解决，还好找到了一些解决办法，最终选用了PHP

，多项目的兼容等等，总之这一折腾又是两个多月。

### 第六阶段，结果

终于经过小伙伴们的层层努力，PHP7迭代顺利升级到线上，开花结果；

![](ot84cmvmf.bkt.clouddn.com/20170928213446_q8IkT5_开心.jpeg)



## 预计进行引入的几个特性

### 异常捕获机制优化，防止错误冒泡

### 强类型
传参

### 一行代码引入多个命名空间

###


## 升级总结
- 性能有了一定的提升，但是通过肉眼观察不太明显，后序会通过服务器负载情况查看具体变化；
- 项目到了一定阶段做任何事情不是小打小闹，需要各方去协调资源，共同解决问题；
